{"version":3,"file":"polpware-fe-behavior.js.map","sources":["ng://@polpware/fe-behavior/lib/state/finite-state-machine.ts"],"sourcesContent":["/**\n * @fileOverview\n * Provides a class representing a finite state machine.\n * @author Xiaolong Tang <xxlongtang@gmail.com>\n * @license Copyright @me\n */\nimport * as dependencies from '@polpware/fe-dependencies';\nimport { replace as replaceStr } from '@polpware/fe-utilities';\n\n// A set of helper functions\nconst _ = dependencies.underscore;\nconst StateMachine = dependencies['statemachine'];\nconst indexOf = _.indexOf;\nconst without = _.without;\nconst transitionKeyFormat = '{from}2{to}';\nconst errorMessageFormat = 'Transition {name} from {from} to {to} fails.';\n\n\nfunction captialize(value: string): string {\n    return value.charAt(0).toUpperCase() + value.slice(1);\n}\n\ninterface IUnderlyImpl {\n    state: string;\n    is(stateName: string): boolean;\n    cannot(transitionName: string): boolean;\n    fire(transitionName: string): any;\n}\n\ninterface ILifeCycleEvent {\n    transition: string;\n    from: string;\n    to: string;\n}\n\ntype MethodCallbackType = (ILifeCycleEvent) => void;\ntype ErrorHandlerType = (name: string, from: string, to: string) => void;\n\ninterface IStateSpecification {\n    onEnterCallback?: MethodCallbackType;\n    onLeaveCallback?: MethodCallbackType;\n}\n\ninterface ITransitionSpecification {\n    from: string;\n    to: string;\n    onBeforeCallback?: MethodCallbackType;\n    onAfterCallback?: MethodCallbackType;\n}\n\n/**\n * Builds a handler with necessary context information.\n * The resulting return value is a closure indeed.\n */\nfunction buildHandlerInClosure(context: { [key: string]: Array<MethodCallbackType> }, key: string) {\n    return function() {\n        const ourHandlers = context[key];\n        if (!ourHandlers) {\n            return;\n        }\n        for (let i = 0; i < ourHandlers.length; i++) {\n            const func = ourHandlers[i];\n            func.apply(null, arguments);\n        }\n    };\n}\n\n/**\n * Default error handler for the FSM.\n */\nfunction defaultErrorHandler(eventName: string, from: string, to: string): void {\n    const info = replaceStr(errorMessageFormat, {\n        name: eventName,\n        from: from,\n        to: to\n    });\n    console.log(info);\n}\n\n/**\n * Represents a finite state machine.\n * The resulting FSM is built upon a commonly used javascript\n * state machine library.\n * Such a design (of architecture) is based on the following considerations:\n * - A user-friendly interface for defining states and their behaviors\n * - A kind of model-checking capability for verifying the correctness of\n * transitions\n * - Support for asychronous and synchrous transitions\n * - Support for global exception handling\n * @class FSM\n */\nexport class FiniteStateMachine {\n\n    private _impl: IUnderlyImpl;\n    private _initState: string;\n    private _errorHandler: ErrorHandlerType;\n    private _stateConfiguration: { [key: string]: IStateSpecification };\n    private _transitionConfiguration: { [key: string]: ITransitionSpecification };\n    private _handlers: { [key: string]: Array<MethodCallbackType> };\n\n    constructor() {\n        this._impl = null;\n        this._initState = null;\n        this._errorHandler = null;\n        this._stateConfiguration = {};\n        this._transitionConfiguration = {};\n        this._handlers = {};\n    }\n\n    /**\n     * Checks if FSM is in configuration stage.\n     */\n    private ensureConfigureStage() {\n        if (this._impl) {\n            throw new Error('State machine has started.');\n        }\n    }\n\n    /**\n     * Checks if FSM is in running stage.\n     */\n    private ensureRunningStage() {\n        if (!this._impl) {\n            throw new Error('State machine has not yet started.');\n        }\n    }\n\n    /**\n     * Defines the behavior when the FSM moves into a state by a transition.\n     */\n    addState(name: string,\n        onEnterCallback?: MethodCallbackType,\n        onLeaveCallback?: MethodCallbackType) {\n        // Pre-conditions\n        this.ensureConfigureStage();\n        const stateConf = this._stateConfiguration;\n        if (stateConf[name]) {\n            throw new Error('Redefined state: ' + name);\n        }\n        stateConf[name] = {\n            onEnterCallback: onEnterCallback,\n            onLeaveCallback: onLeaveCallback\n        };\n        return this;\n    }\n\n    /**\n     * Defines the init state for the FSM.\n     */\n    setInitState(name: string) {\n        // Pre-conditions\n        this.ensureConfigureStage();\n\n        if (this._initState) {\n            throw new Error('Redefined init state: ' + this._initState);\n        }\n        this._initState = name;\n        return this;\n    }\n\n    /**\n     * Defines a new stransition.\n     */\n    addTransition(from: string,\n        to: string,\n        onAfterCallback?: MethodCallbackType,\n        onBeforeCallback?: MethodCallbackType) {\n        // Pre-condition\n        this.ensureConfigureStage();\n\n        const stateConf = this._stateConfiguration;\n        const transitionConf = this._transitionConfiguration;\n        if (!stateConf[from]) {\n            throw new Error('Undefined source state: ' + from);\n        }\n        if (!stateConf[to]) {\n            throw new Error('Undefined target state: ' + to);\n        }\n        const key = replaceStr(transitionKeyFormat, { from: from, to: to });\n        if (transitionConf[key]) {\n            throw new Error('Redefined transition: ' + from + ' -> ' + to);\n        }\n        transitionConf[key] = {\n            from: from, to: to,\n            onAfterCallback: onAfterCallback,\n            onBeforeCallback: onBeforeCallback\n        };\n        return this;\n    }\n\n    /**\n     * Starts the FSM. Note that this method must be invoked before\n     * any method which may change the state of the FSM.\n     */\n    start() {\n\n        this.ensureConfigureStage();\n        if (!this._initState) {\n            throw new Error('Init state has not been defined.');\n        }\n\n        // Definition\n        const stateConf: Object = this._stateConfiguration;\n        const transitionConf: Object = this._transitionConfiguration;\n\n        const transitions: Array<{ name: string, from: string, to: string }> = [];\n        const methods: { [key: string]: MethodCallbackType } = {};\n\n        for (const k1 in transitionConf) {\n            if (transitionConf.hasOwnProperty(k1)) {\n                const elem1 = transitionConf[k1];\n                transitions.push({\n                    name: k1,\n                    from: elem1.from,\n                    to: elem1.to\n                });\n\n                if (elem1.onAfterCallback) {\n                    methods['onAfter' + captialize(k1)] = elem1.onAfterCallback;\n                }\n                if (elem1.onBeforeCallback) {\n                    methods['onBefore' + captialize(k1)] = elem1.onAfterCallback;\n                }\n            }\n        }\n\n        for (const k2 in stateConf) {\n\n            if (stateConf.hasOwnProperty(k2)) {\n                const elem2 = stateConf[k2];\n\n                if (elem2.onEnterCallback) {\n                    methods['onEnter' + captialize(k2)] = elem2.onEnterCallback;\n                }\n                if (elem2.onLeaveCallback) {\n                    methods['onLeave' + captialize(k2)] = elem2.onLeaveCallback;\n                }\n            }\n        }\n\n        const handlers = this._handlers;\n        handlers.onEnterState = [];\n        handlers.onLeaveState = [];\n\n        methods['onEnterState'] = buildHandlerInClosure(this._handlers, 'onEnterState');\n        methods['onLeaveState'] = buildHandlerInClosure(this._handlers, 'onLeaveState');\n\n        this._impl = new StateMachine({\n            init: this._initState,\n            transitions: transitions,\n            methods: methods,\n            onInvalidTransition: this._errorHandler || defaultErrorHandler\n        });\n        return this;\n    }\n\n    /**\n     * Registers a handler for enterstate\n     */\n    onEnterState(handler: MethodCallbackType) {\n        const ourHandlers = this._handlers.onEnterState;\n        if (indexOf(ourHandlers, handler) >= 0) {\n            throw new Error('Re-registering a hander!');\n        }\n        ourHandlers.push(handler);\n        return this;\n    }\n\n    /**\n     * Registers a handler for exitstate\n     */\n    onExitState(handler: MethodCallbackType) {\n        const ourHandlers = this._handlers.onLeaveState;\n        if (indexOf(ourHandlers, handler) >= 0) {\n            throw new Error('Registering a hander!');\n        }\n        ourHandlers.push(handler);\n        return this;\n    }\n\n    /**\n     * Un-register a handler for enterstate\n     */\n    offEnterState(handler: MethodCallbackType) {\n        const ourHandlers = this._handlers.onEnterState;\n        this._handlers.onenterstate = without(ourHandlers, handler);\n        return this;\n    }\n\n    /**\n     * Un-register a handler for exitstate\n     */\n    offExitState(handler: MethodCallbackType) {\n        const ourHandlers = this._handlers.onLeaveState;\n        this._handlers.onexitstate = without(ourHandlers, handler);\n        return this;\n    }\n\n    /**\n     * Performs a transition to the given state.\n     * This method also validate the transition.\n     */\n    go(to: string) {\n        this.ensureRunningStage();\n\n        const stateConf = this._stateConfiguration;\n        if (!stateConf[to]) {\n            throw new Error('Go to undefined state: ' + to);\n        }\n        if (this._impl.is(to)) {\n            // TODO: check if the underlying implementation takes into account\n            // moving from one state to itself\n            return this;\n        }\n        const currentState = this._impl.state;\n        const transitionName = replaceStr(transitionKeyFormat, { from: currentState, to: to });\n        // Validate if this transition is allowed or not\n        if (this._impl.cannot(transitionName)) {\n            throw new Error('Transition is not allowed: ' + currentState + ' -> ' + to);\n        }\n\n        // Invoke this function\n        const func = this._impl[transitionName];\n        func.call(this._impl);\n        return self;\n    }\n\n    /**\n     * Provides the error handler for the FSM.\n     */\n    addErrorHandler(fn: ErrorHandlerType) {\n        this.ensureConfigureStage();\n\n        this._errorHandler = fn;\n\n        return this;\n    }\n\n    /**\n     * Returns the current state.\n     */\n    current() {\n        this.ensureRunningStage();\n        return this._impl.state;\n    }\n}\n"],"names":["dependencies.underscore","dependencies['statemachine']","replaceStr"],"mappings":"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"}
